<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>로그인 - 리카봇 (RicarBot)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#0f1729",
                        "background-light": "#f6f7f8",
                        "background-dark": "#14171e",
                    },
                    fontFamily: {
                        "display": ["Inter", "Noto Sans KR", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans KR', sans-serif;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(15, 23, 41, 0.08);
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark min-h-screen flex flex-col font-display">
    <!-- Top Navigation -->
    <header class="w-full px-6 py-4 flex justify-between items-center max-w-7xl mx-auto">
        <div class="flex items-center gap-2 group cursor-pointer" onclick="location.href='index.html'">
            <div class="bg-primary text-white p-1.5 rounded-lg">
                <span class="material-symbols-outlined text-lg">smart_toy</span>
            </div>
            <span class="text-slate-900 dark:text-slate-100 text-xl font-bold tracking-tight">리카봇</span>
        </div>
        <div>
            <a class="text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-primary transition-colors"
                href="#">고객지원</a>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow flex items-center justify-center px-4 py-12">
        <div class="w-full max-w-[440px]">
            <!-- Login Card -->
            <div
                class="glass-effect dark:bg-slate-900/50 rounded-xl shadow-xl shadow-slate-200/50 dark:shadow-none p-8 md:p-10">
                <!-- Header -->
                <div class="text-center mb-10">
                    <h1 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-100 mb-3 tracking-tight">
                        리카봇
                        로그인</h1>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed">
                        비즈니스 성장을 위한 AI 마케팅 파트너
                    </p>
                </div>

                <!-- Error Message -->
                <div class="hidden mb-6 p-3 rounded-lg bg-red-50 border border-red-100 flex items-center gap-2 text-red-600 text-sm"
                    id="errorMessage">
                    <span class="material-symbols-outlined text-[18px]">error</span>
                    <span id="errorText">이메일 또는 비밀번호가 일치하지 않습니다.</span>
                </div>

                <!-- Form -->
                <form class="space-y-5" onsubmit="return false;">
                    <div>
                        <label class="block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2"
                            for="email">이메일 주소</label>
                        <div class="relative">
                            <input
                                class="w-full px-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400"
                                id="email" placeholder="name@company.com" type="email" />
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between mb-2">
                            <label class="text-sm font-semibold text-slate-700 dark:text-slate-300"
                                for="password">비밀번호</label>
                            <a class="text-xs font-medium text-primary/70 hover:text-primary dark:text-slate-400 dark:hover:text-slate-200 transition-colors"
                                href="#">비밀번호를 잊으셨나요?</a>
                        </div>
                        <div class="relative group">
                            <input
                                class="w-full px-4 py-3 rounded-lg border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-primary/10 focus:border-primary outline-none transition-all placeholder:text-slate-400 pr-12"
                                id="password" placeholder="••••••••" type="password" />
                            <button
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 p-1"
                                type="button"
                                onclick="const p = document.getElementById('password'); p.type = p.type === 'password' ? 'text' : 'password';">
                                <span class="material-symbols-outlined text-[20px]">visibility</span>
                            </button>
                        </div>
                    </div>
                    <button
                        class="w-full bg-primary hover:bg-slate-800 text-white font-bold py-3.5 rounded-lg shadow-lg shadow-slate-200 dark:shadow-none transition-all flex items-center justify-center gap-2 active:scale-[0.98]"
                        id="emailLoginBtn">
                        로그인
                    </button>
                </form>

                <!-- Footer Links -->
                <div class="mt-8 pt-8 border-t border-slate-100 dark:border-slate-800 text-center">
                    <p class="text-sm text-slate-500 dark:text-slate-400">
                        아직 회원이 아니신가요?
                        <a class="text-primary dark:text-slate-200 font-semibold hover:underline ml-1"
                            href="signup.html">회원가입</a>
                    </p>
                </div>
            </div>

            <!-- Trust Cues & Security -->
            <div class="mt-8 flex flex-col items-center gap-4">
                <div class="flex items-center gap-6">
                    <div class="flex items-center gap-1.5 text-slate-400 dark:text-slate-500">
                        <span class="material-symbols-outlined text-[16px]">lock</span>
                        <span class="text-[12px] font-medium tracking-tight">안전한 인증 시스템</span>
                    </div>
                    <div class="flex items-center gap-1.5 text-slate-400 dark:text-slate-500">
                        <span class="material-symbols-outlined text-[16px]">shield</span>
                        <span class="text-[12px] font-medium tracking-tight">데이터 보안 보호</span>
                    </div>
                </div>
                <p class="text-[11px] text-slate-400 dark:text-slate-600 text-center max-w-[300px] leading-relaxed">
                    모든 데이터는 암호화되어 안전하게 보호됩니다. 리카봇은 귀하의 개인정보를 최우선으로 생각합니다.
                </p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="py-8 text-center border-t border-slate-100 dark:border-slate-800">
        <div class="flex justify-center gap-4 mb-3">
            <a class="text-xs text-slate-400 hover:text-slate-600 transition-colors" href="license.html">이용약관</a>
            <a class="text-xs text-slate-400 hover:text-slate-600 transition-colors" href="privacy.html">개인정보처리방침</a>
        </div>
        <p class="text-[10px] text-slate-400 uppercase tracking-widest">© 2026 RICARBOT AI. ALL RIGHTS RESERVED.</p>
    </footer>

    <!-- Firebase SDK (Compat Version) -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="firebase_config.js"></script>

    <script>
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');

        // Email Login Handler
        document.getElementById('emailLoginBtn').addEventListener('click', async () => {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();

            if (!email || !password) {
                showError('이메일과 비밀번호를 모두 입력해주세요.');
                return;
            }

            try {
                const result = await auth.signInWithEmailAndPassword(email, password);
                handleSuccessfulLogin(result.user);
            } catch (error) {
                console.error("Email Login Error:", error);
                let msg = `로그인 실패: ${error.message}`;
                if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') msg = '이메일 또는 비밀번호가 일치하지 않습니다.';
                if (error.code === 'auth/invalid-email') msg = '유효하지 않은 이메일 형식입니다.';
                showError(msg);
            }
        });

        function handleSuccessfulLogin(user) {
            console.log("Login Success:", user.email);
            const urlParams = new URLSearchParams(window.location.search);
            const redirect = urlParams.get('redirect');

            if (redirect) {
                window.location.href = decodeURIComponent(redirect);
            } else {
                window.location.href = 'index.html';
            }
        }

        function showError(msg) {
            errorText.textContent = msg;
            errorMessage.classList.remove('hidden');
        }
    </script>
</body>

</html>